#!/usr/bin/env bash
set -euo pipefail

if [[ "$#" -lt 2 ]]; then
  echo "USAGE:"
  echo "  run demo <role>"
  echo "  run real <role>"
  echo "  run gpt-slim <role>"
  exit 1
fi

MODE="$1"
ROLE="$2"

case "$MODE" in
  demo|real)
    python3 orchestrator.py "$ROLE" --mode "$MODE"
    ;;
  gpt-slim)
    python3 run_gpt_slim.py --input "outputs/*/${ROLE}__FINAL.csv" --output "outputs/*/${ROLE}__GPT_SLIM.csv" --open
    ;;
  *)
    echo "Unknown mode: $MODE"
    exit 2
    ;;
esac
